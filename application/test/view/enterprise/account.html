{extend name="public/base" /}
{block name="body"}

<script type="text/javascript" href="__PUBLIC__/plugs/bootstrap/popover.js"></script>

<link href="/public/plugs/datepicker/css/foundation-datepicker.min.css" rel="stylesheet" type="text/css">
<script src="/public/plugs/datepicker/js/foundation-datepicker.js"></script>
<script src="/public/plugs/datepicker/js/foundation-datepicker.zh-CN.js"></script>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/enterpriseA.css"/>

<div class="row">
			<div class="col-lg-12">
						<!-- Nav tabs -->
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 20px;">
					<li role="presentation" class="active">
						 <a href="#home" aria-controls="home" role="tab" data-toggle="tab">企业账户</a>
						 <i></i>
					</li>
					<li role="presentation">
						<a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">订购充值</a>
						<i></i>
					</li>
					<li role="presentation">
						<a href="#Consumption" aria-controls="Consumption" role="tab" data-toggle="tab">消耗记录</a>
					</li>
				</ul>

        
				<div class="main-box clearfix">	
				<!-- Tab panes -->
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane e_setdatabg active" id="home">
					  <div class="e_setmargin clearfix">
    				  <div class="my-header fl con-padding">
    						<div class="my-title"><i class="icon iconfont icon-zhanghuzonglan"></i>账户总览 </div>
    						<div class="my-detail">			    
    							<div class="ant-avatar">
    								<img class="img-circle" id="headImg" src="__PUBLIC__/images/default_avatar.jpg" />
    							</div>
    							<div class="my-detail-info">
    								<div class="my-detail-info-item">
    									<p id="adminUser">元</p>
    									<p><i class="icon iconfont icon-zhanghao"></i>客户名称</p>
    								 </div>
    								 <div class="my-detail-info-item">
    									 <p class="version" id="adminmoney"></p>
    									 <p><i class="icon iconfont icon-yue"></i>余额</p>
    								 </div>
    								 <div class="my-detail-info-item">
    									 <p>专业版</p>
    									 <p class="version"><i class="icon iconfont icon-version"></i>版本</p>
    								 </div>
    							</div>
    						</div>
    					</div>
    					<div class="seat-wrap seatwidth fl">
    						<div class="my-title"><i class="icon iconfont icon-zuoxi"></i>坐席</div>
    						<div class="seat-num seat-numright">
    						  <div class="e_shownum">
    						    <div class="e_shownumleft">
    						      <p>1</p>
    						      <p>AI坐席</p>
    						    </div>
    						    <div class="e_shownumright">剩余可用：1个</div>
    						  </div>
    							 <button type="button" class="btn btn-size-default">
    								购买更多并发<i class="icon iconfont icon-jiantou"></i>
    							 </button>
    						</div>
    						<div class="seat-num">
    						  <div class="e_shownum">
    						    <div class="e_shownumleft">
    						      <p>2</p>
    						      <p>人工坐席</p>
    						    </div>
    						    <div class="e_shownumright">剩余可用：1个</div>
    					    </div>
    							<button type="button" class="btn btn-size-default">
    								购买更多并发<i class="icon iconfont icon-jiantou"></i>
    							</button>
      					</div>
      				</div>
    				</div>
						<div class="seat-wrap e_seatother con-padding">
								  <div class="my-title"><i class="icon iconfont icon-goumaijilu"></i>购买记录</div>
								  <div class="table-responsive">					 
									 <table class="table table-hover"> 
										<thead class="ant-table-thead">
											<tr>
												<th><span>机器人数量</span></th>
												<th><span>机器人剩余数量</span></th>
												<th><span>服务周期</span></th>
												<th><span>操作</span></th>
											</tr>
										</thead>
											<tbody class="ant-table-tbody">
												<tr class="ant-table-row">
													<td><span id="robotNum"></span>个</td>
													<td id="surplus"></td>
												
													<td id="expirydate">
														
													</td>
													<td>
													 <div style="max-width: 190px;">
														  <button type="button" class="btn btn-size-default" title="温馨提示"
																			data-container="body" data-toggle="popover" data-placement="left"
																			data-content="如需购买或延期，请联系您的销售经理">
																	更多...
															</button>
													<!-- 	 <a href="#" data-toggle="popover" title="Example popover">延 期</a> -->
													 </div>
													</td>
												</tr>
											</tbody>		
									 </table>
								</div>
								
							</div>
							
							<!-- <div class="sms-wrap">
								 <div class="my-title">话费</div>
									<div class="table-responsive">					 
										 <table class="table table-hover"> 
											<thead class="ant-table-thead">
												<tr>
													<th><span>线路名</span></th>
													<th><span>线路别名</span></th>
													<th><span>费率类型</span></th>
													<th><span>计费周期</span></th>
													<th><span>价格</span></th>
													<th><span>余额</span></th>
													<th><span>操作</span></th>
												</tr>
											</thead>
												<tbody class="ant-table-tbody">
													<tr class="ant-table-row">
														<td>2个</td>
														<td>2018-08-31 19:12:57</td>
														<td>2018-08-29至2018-09-29</td>
														<td>2个</td>
														<td>2018-08-31 19:12:57</td>
														<td>2018-08-29至2018-09-29</td>
														<td style="max-width: 190px;">
																<button type="button" class="btn btn-size-default">通话详单</button>
																<button type="button" class="btn btn-size-default">余额转移</button>
														</td>
													</tr>
												</tbody>	
													
										 </table>
									</div>
							 </div> -->
							<!-- 	 
								 <div class="sms-wrap">
										<div class="my-title">短信</div>
										<div class="table-responsive">					 
											 <table class="table table-hover"> 
												<thead class="ant-table-thead">
													<tr>
														<th><span>余量</span></th>
														<th><span>操作</span></th>
													</tr>
												</thead>
													<tbody class="ant-table-tbody">
														<tr class="ant-table-row">
															<td style="width: 80%;">
																<div>0条</div>
															</td>
															<td>
															 <div style="max-width: 190px;">
																 <button type="button" class="btn btn-size-default"><span>消耗详单</span></button>
															 </div>
															</td>
														</tr>
													</tbody>		
											 </table>
										</div>
								 </div>
								 -->
					</div>
					
					
					<div role="tabpanel" class="tab-pane" id="profile">
						  		
						<div class="main-context"> 

								<div class="table-responsive">		
										<section class="navbar main-box-header clearfix">		
											<div class="clearfix">
												<div class="form-inline pull-left" method="get" role="form">
							
													<div class="form-group">
														<label class="statusSelect">时间范围:</label>
														<div class="col-lg-9 col-sm-9">
															<div class="col-lg-12 col-sm-12">
																<input type="text" style="width:167px;" class="form-control" id="startDate" name="startDate" value="" readonly="" />
															</div>
															<script>
															$('#startDate').fdatepicker({
																format: 'yyyy-mm-dd  hh:ii:ss',
																pickTime: true
															});
															</script>	
															
														</div>
													</div>
													至
													<div class="form-group">
							
														<div class="col-lg-9 col-sm-9">
															<div class="col-lg-12 col-sm-12">
																<input type="text" class="form-control" id="endTime" name="endTime" value="" readonly="" />
															</div>
							
															<script>
																$('#endTime').fdatepicker({
																	format: 'yyyy-mm-dd hh:ii:ss',
																	pickTime: true
																});
															</script>	
															
														</div>
							
													</div>
							
													<div class="form-group">
															<label>所属人：</label>
															<input type="text" class="form-control" style="width:120px;" id="Personal" name="Personal" placeholder="请输入所属人">
													</div>&nbsp;&nbsp;
													<div class="form-group"> 
														<label class="statusSelect">状态：</label>
														<select style="width:100px;" name="status" id="status" class="form-control">
															<option value=" " selected="">全部</option>
															<option value="0">未成功</option>
															<option value="1">已成功</option>
														</select>
												</div>
													<span class="btn btn-primary" type="button" onclick="searchdata(1,1);">搜索</span>
												
												</div>
												<span class="btn btn-primary pull-right" type="button">导出数据</span>
											</div>  
											
										</section>
																  		 
											 
									<table class="table table-bordered table-hover"> 
											<thead class="ant-table-thead">
												<tr>
													<th>所属人</th>
													<th>充值金额</th>
													<th>充值类型</th>
													<th>状态</th>
												<!-- 	<th>充值方式</th> -->
													<th>充值时间</th>
												</tr>
											</thead>
											
											<tbody class="ant-table-tbody" id="depositlist">
												
									
											</tbody>		
									</table>
									
									<div id="modalpagybody"></div>
									
								</div>
								<div class="component-page-empty" id="desempty">
									<div class="empty-tip line">暂无数据</div>
								</div>
			
						</div>
						  				
					</div>
					
					
					<div role="tabpanel" class="tab-pane" id="Consumption">
				
							<div class="main-context"> 
				
									<div class="table-responsive">			
											<section class="navbar main-box-header clearfix">
														
												<div class="clearfix">
													<div class="form-inline pull-left" method="get" role="form">
								 
														<div class="form-group">
															<label class="statusSelect">时间范围:</label>
															<div class="col-lg-9 col-sm-9">
																<div class="col-lg-12 col-sm-12">
																	<input type="text" style="width:167px;" class="form-control" id="startTime" name="startTime" value="" readonly="" />
																</div>
																<script>
																$('#startTime').fdatepicker({
																	format: 'yyyy-mm-dd  hh:ii:ss',
																	pickTime: true
																});
																</script>	
																
															</div>
														</div>
														至
														<div class="form-group">
								 
															<div class="col-lg-9 col-sm-9">
																<div class="col-lg-12 col-sm-12">
																	<input type="text" class="form-control" id="endDate" name="endDate" value="" readonly="" />
																</div>
								 
																<script>
																	$('#endDate').fdatepicker({
																		format: 'yyyy-mm-dd hh:ii:ss',
																		pickTime: true
																	});
																</script>	
																
															</div>
								 
														</div>
								 
														<div class="form-group">
																<label>管理员：</label>
																<input type="text" class="form-control" style="width:120px;" id="ownerps" name="ownerps" placeholder="请输入管理员">
														</div>
													
														<span class="btn btn-primary" type="button" onclick="orderRecharge(1,1);">搜索</span>
													
								 
													</div>
													<span class="btn btn-primary pull-right" type="button">导出数据</span>									
												</div>  
												
											</section>
											 												
										<table class="table table-bordered table-hover"> 
												<thead class="ant-table-thead">
													<tr>
														<th>管理员</th>
														<th>用户</th>
														<th>被叫号码</th>
														<th>消费金额</th>
													
														<th>按时计费单价</th>
														<th>按月计费单价</th>
														<th>按识别计费单价</th>
														<th>识别次数</th>
														<th>通话时间长</th>

														<th>创建时间</th>
														<th>结束时间</th>
													</tr>
												</thead>
												
												<tbody class="ant-table-tbody" id="orderlist">
													
													<!-- <tr class="ant-table-row">
														<td>扩容</td>
														<td>
															2018-08-31 19:12:57
														</td>
														<td>
															1个并发 * 1个月
														</td>
													</tr> -->
													
												</tbody>		
										</table>
										
										
										<div id="modalbody"></div>
										
									</div>
									
									<div class="component-page-empty" id="componentempty">
										<div class="empty-tip line">暂无数据</div>
									</div>
									
							</div>
		
					</div>
				
	      </div>

		</div>
	</div>				
</div>


 <script type="text/javascript">
	 
 var despage = 1;
 	var page = 1;
 $(function(){
	 
   userInfo();
	 
	 orderRecharge(page,0);
	 
	 searchdata(despage,0);
	 
	 $("[data-toggle='popover']").popover();
   
 }) 

	function userInfo(){	
 
		var url = "{:url('getInformation')}";	
		$.ajax({
			url : url,
			dataType : "json", 
			type : "post",
			data : {},
			success: function(data){
				
				if(data.code=="0"){
					
					var mresult = data.data.mresult; 
					$("#adminUser").text(mresult.username);
					if(mresult.headImg){
						$("#headImg").attr(mresult.headImg);
					}
					if(mresult.money){
				   	$("#adminmoney").text(mresult.money);
					}
					$("#robotNum").text(mresult.robot_cnt);
					$("#surplus").text(mresult.rnum);
					$("#expirydate").text(mresult.create_time + " 至 " + mresult.expiry_date);

				}else{
					console.log(data.msg);
				}
   
         

			},
			error: function() {
				console.log('获取列表失败。');
			}
		});
	 
	}	

 </script>
 
 <script type="text/javascript">
	
  // 订购充值 的搜索	
	var startDate,endTime,personal,status;
  function recharge(page){
		
		 	var url = "{:url('getConsume')}";	
		 	$.ajax({
		 					url : url,
		 					dataType : "json", 
		 					type : "post",
		 					data : {
								'page':page,
								'startDate':startDate,
								'endTime':endTime,
								'personal':personal,
								'status':status
								},
		 				
		 					success: function(data){
								
		             if(data.code == 0){
									 
										var total = data.data.total;
										var Nowpage = data.data.Nowpage;
										var page = data.data.page;
										var Nowpage = parseInt(Nowpage);
										
										var data = data.data.list;
											if(data.length > 0){
												
													$("#desempty").css("display","none");
												
													$("#depositlist").find("tr").remove();
													
													for(var i=0;i<data.length;i++){
														
													
														var id = data[i].id;
														var username = data[i].username;
														var menoy = data[i].menoy;
														var type = data[i].type;
														var status = data[i].status;
														var create_time = data[i].create_time;
														var deposit_type = data[i].deposit_type;
														
														var typestr = "现金";
														if(type == '1'){
															var typestr = "语音充值";
														}
				 //  										var destypestr = "微信";
				 //  										if(deposit_type == '1'){
				 //  											var destypestr = "支付宝";
				 //  										}
				 //  
												
															var strstatus = "未成功";
															if(status == "1"){
																	strstatus = "已成功";
															}
				 
															var string = '<tr class="itemId'+id+'" alt="'+id+'">'
															+'<td>'+username+'</td>'
															+'<td>'+menoy+'</td>'
															+'<td>'+typestr+'</td>'
															+'<td>'+strstatus+'</td>'
															// +'<td>'+destypestr+'</td>'
															+'<td>'+create_time+'</td>';
															string += '</tr>';
															$("#depositlist").append(string); 
				 
													}
													
													var prepage = Nowpage-1;
													var nextpage = Nowpage+1;
													
													var str = '<div class="row">'
													+'<div class="col-sm-3 text-left">'
																
													+'<table class="table table-bordered table-hover" style="margin-bottom: 0px; ">'
													+'<tbody><tr>'
													+'<td class="text-center">总充值金额：'
													+'</td>'
													+'<td class="text-center">'+total+'&nbsp;元'
													+'</td>'
																				
													+'</tr> '
													+'</tbody></table>'                                     
						
													+'</div>'
													+'<div class="col-sm-9 text-right">'
													+'<ul class="pagination">';
													
													if(Nowpage == 1){
														str += '<li id="prevbtn" class="disabled"><span>«</span></li> ';
													}else{
														str += '<li><a href="javascript:void(0);" onclick="searchdata('+prepage+',0);"><span>«</span></a></li> ';
													}
													
													if(page > 10){
													
														if(Nowpage < 7){
															for(var i=0;i<page;i++){
																var nownum = i+1;
																if(nownum < 9){
																		if(nownum == Nowpage){
																			str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> ';  
																		}else{
																			str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> ';  
																		}
																}
																
																if(nownum == 9 && nownum != Nowpage){
																		str += '<li class="disabled"><span>...</span></li>';  
																}else if(nownum == 9){
																	str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li> ';  
																}
															
																	if(nownum > (page-2)){
																			if(nownum == Nowpage){
																				str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> ';  
																			}else{
																				str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> ';  
																			}
																	}
				 
																}
														}else if(Nowpage > 6 && Nowpage < (page-6)){
															for(var i=0;i<page;i++){
																var nownum = i+1;
																var Nowpage = parseInt(Nowpage);
																if(nownum < 3){
																	str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> '; 
																}
																
																if((nownum > Nowpage-5) && (nownum < Nowpage+5)){
															
																					if(nownum == (Nowpage-4)){
																						str += '<li class="disabled"><span>...</span></li>';
																					}   
																				
																						if(nownum > (Nowpage-4) && nownum < Nowpage){
																							str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li>'; 
																						}  
																					
																						if(nownum == Nowpage){
																						str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li>';  
																						} 
																					
																						if(nownum < (Nowpage + 4) && nownum > Nowpage){
																						str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li>'; 
																						}  
																			
																						if(nownum == (Nowpage + 4)){
																					
																						str += '<li class="disabled"><span>...</span></li>';
																						}   
																	}
																	
																if(nownum > (page-2)){
																	var Nowpage = parseInt(Nowpage);
																	if(nownum == Nowpage){
																				str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li>';
																		}else{
																			str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li> ';
																		}   
																
																	}     
				 
																}
														}else{
															
															for(var i=0;i<page;i++){
																var nownum = i+1;
																if(nownum<3){
																	str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li>';  
																}
															
																if(nownum == (page-10) && nownum != Nowpage){
																	str += '<li class="disabled"><span>...</span></li>';   
																}else if(nownum == (page-10) && nownum == Nowpage){
																	str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li>';   
																}
																
																if(nownum > (page-10)){
																	if(nownum == Nowpage){
																		str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li> ';   
																	}else{
																		str += '<li ><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+'</a></li>';   
																	}
																}
																
																
															}
													
																
														}
													}else{
															for(var i=0;i<page;i++){
																var nownum = i+1;
																if(nownum == Nowpage){
																	str += '<li class="active"><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> ';  
																}else{
																	str += '<li><a href="javascript:void(0);" onclick="searchdata('+nownum+',0);">'+nownum+' </a></li> ';  
																}
															}
													}
													
								
												
													if(Nowpage == page){
														str += '<li id="prevbtn" class="disabled"><span>»</span></li> ';
													}else{
														str += '<li><a href="javascript:void(0);" onclick="searchdata('+nextpage+',0);"><span>»</span></a></li>';
													}
												
													str += '</ul>'
													+'</div>'
													+'</div>'
													
													$("#modalpagybody").find("div").remove();
													$("#modalpagybody").append(str); 
													
													}
											else{
												
													$("#desempty").css("display","block");
				 
													$("#depositlist").find("tr").remove();
										
											}
											
								 }else{
															$("#desempty").css("display","block");
							 
															$("#depositlist").find("tr").remove();
								 }
		 					
		 					},
		 					error : function() {
		 						alert('获取列表失败。');
		 					}
		 		});
		 	
	
  }	 
  	 
 //获取订购充值列表
 function searchdata(page,type){	

  		if(type == 1){
  			startDate = $("#startDate").val();
  			endTime = $("#endTime").val();
  			personal = $("#Personal").val();
  			status = $("#status").val();
  		}
  
	    recharge(page);
 }	
 
 </script>
 
 
 <script type="text/javascript">
	 
	 	//获取等待列表
 	var startTime,endDate,ownerps;

	 	function orderRecharge(page,type){	
			
	     		if(type == 1){
	     			startTime = $("#startTime").val();
	     			endDate = $("#endDate").val();
	     			ownerps = $("#ownerps").val();
	     		}
	     
	     		consumption(page);
	  }	
	 
	 function consumption(page){
		 	
		 		var url = "{:url('getorderRecharge')}";	
		 		$.ajax({
		 						url : url,
		 						dataType : "json", 
		 						type : "post",
		 						data : {
									'page':page,
									'startTime':startTime,
									'endDate':endDate,
									'ownerps':ownerps,
									},
		 					
		 						success: function(data){
									 if(data.code == 0){
												var total = data.data.total;
												var Nowpage = data.data.Nowpage;
												var page = data.data.page;
												var Nowpage = parseInt(Nowpage);
												
												var data = data.data.list;
												if(data.length > 0){
													
															$("#componentempty").css("display","none");
													
															$("#orderlist").find("tr").remove();
															
															for(var i=0;i<data.length;i++){
																
																var id = data[i].id;
																var musername = data[i].musername;
																var ausername = data[i].ausername;
																var owner = data[i].owner;
																var member_id = data[i].member_id;
																var mobile = data[i].mobile;
																var duration = data[i].duration;
																var money = data[i].money;
																var time_price = data[i].time_price;
																var month_price = data[i].month_price;
																var asr_price = data[i].asr_price;
																var create_time = data[i].create_time;
																var end_time = data[i].end_time;
																var asr_cnt = data[i].asr_cnt;
						 
																var string = '<tr class="itemId'+id+'" alt="'+id+'">'
																	+'<td>'+ausername+'</td>'
																	+'<td>'+musername+'</td>'
																	+'<td>'+mobile+'</td>'
																	+'<td>'+money+'（元）</td>'
																	+'<td>'+time_price+'</td>'
																	+'<td>'+month_price+'</td>'
																	+'<td>'+asr_price+'</td>'
																	+'<td>'+asr_cnt+'</td>'
																	+'<td>'+duration+'</td>'   
																	+'<td>'+create_time+'</td>'
																	+'<td>'+end_time+'</td>';
																	string += '</tr>';
																	$("#orderlist").append(string); 
						 
															}
															
															var prepage = Nowpage-1;
															var nextpage = Nowpage+1;
														
															var str = '<div class="row">'
															+'<div class="col-sm-3 text-left">'
																		
															+'<table class="table table-bordered table-hover" style="margin-bottom: 0px; ">'
															+'<tbody><tr>'
															+'<td class="text-center">总消费金额：'
															+'</td>'
															+'<td class="text-center">'+total+'&nbsp;元'
															+'</td>'
																					
															+'</tr> '
															+'</tbody></table>'                                     
								
															+'</div>'
															+'<div class="col-sm-9 text-right">'
															+'<ul class="pagination">';
														
															if(Nowpage == 1){
																str += '<li id="prevbtn" class="disabled"><span>«</span></li> ';
															}else{
																str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+prepage+',0);"><span>«</span></a></li> ';
															}
															
															if(page > 10){
															
																if(Nowpage < 7){
																	for(var i=0;i<page;i++){
																		var nownum = i+1;
																		if(nownum < 9){
																			if(nownum == Nowpage){
																				str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> ';  
																			}else{
																				str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> ';  
																			}
																		}
																		
																		if(nownum == 9 && nownum != Nowpage){
																			str += '<li class="disabled"><span>...</span></li>';  
																		}else if(nownum == 9){
																			str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li> ';  
																		}
																	
																			if(nownum > (page-2)){
																				if(nownum == Nowpage){
																					str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> ';  
																				}else{
																					str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> ';  
																				}
																			}
						 
																	}
																}else if(Nowpage > 6 && Nowpage < (page-6)){
																	for(var i=0;i<page;i++){
																		var nownum = i+1;
																		var Nowpage = parseInt(Nowpage);
																		if(nownum < 3){
																			str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> '; 
																		}
																		
																		if((nownum > Nowpage-5) && (nownum < Nowpage+5)){
																	
																						if(nownum == (Nowpage-4)){
																								str += '<li class="disabled"><span>...</span></li>';
																						}   
																						
																							if(nownum > (Nowpage-4) && nownum < Nowpage){
																								str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li>'; 
																							}  
																						
																							if(nownum == Nowpage){
																							str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li>';  
																							} 
																						
																							if(nownum < (Nowpage + 4) && nownum > Nowpage){
																								str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li>'; 
																							}  
																					
																							if(nownum == (Nowpage + 4)){
																							
																							str += '<li class="disabled"><span>...</span></li>';
																							}   
																		}
																		
																	if(nownum > (page-2)){
																		var Nowpage = parseInt(Nowpage);
																		if(nownum == Nowpage){
																					str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li>';
																			}else{
																					str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li> ';
																			}   
																	
																		}     
						 
																	}
																}else{
																	
																	for(var i=0;i<page;i++){
																		var nownum = i+1;
																		if(nownum<3){
																			str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li>';  
																		}
																	
																		if(nownum == (page-10) && nownum != Nowpage){
																			str += '<li class="disabled"><span>...</span></li>';   
																		}else if(nownum == (page-10) && nownum == Nowpage){
																			str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li>';   
																		}
																		
																		if(nownum > (page-10)){
																			if(nownum == Nowpage){
																				str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li> ';   
																			}else{
																				str += '<li ><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+'</a></li>';   
																			}
																		}
																		
																		
																	}
														
																		
																}
															}else{
																for(var i=0;i<page;i++){
																	var nownum = i+1;
																	if(nownum == Nowpage){
																		str += '<li class="active"><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> ';  
																	}else{
																		str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nownum+',0);">'+nownum+' </a></li> ';  
																	}
																}
															}
															
										
													
															if(Nowpage == page){
																str += '<li id="prevbtn" class="disabled"><span>»</span></li> ';
															}else{
																str += '<li><a href="javascript:void(0);" onclick="orderRecharge('+nextpage+',0);"><span>»</span></a></li>';
															}
														
															str += '</ul>'
															+'</div>'
															+'</div>'
														
															$("#modalbody").find("div").remove();
															$("#modalbody").append(str); 
															
														}
												else{
													
															$("#componentempty").css("display","block");
						 
															$("#orderlist").find("tr").remove();
												
												}
												
									 }else{
													$("#componentempty").css("display","block");
					 
													$("#orderlist").find("tr").remove();
									 }
		 				
		 						},
		 						error : function() {
		 							alert('获取列表失败。');
		 						}
		 			});
		 		
	 }
	 
 </script>

</div>


{/block}

